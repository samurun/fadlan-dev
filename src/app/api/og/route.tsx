import { ImageResponse } from 'next/og';
import { siteConfig } from '@/config/site';

export const runtime = 'edge';

const interBold = fetch(
  new URL('../../../assets/fonts/Inter-Bold.ttf', import.meta.url)
).then((res) => res.arrayBuffer());

export async function GET() {
  try {
    const fontBold = await interBold;

    return new ImageResponse(
      (
        <div tw='flex relative flex-col p-12 w-full h-full items-center justify-center text-black bg-white'>
          <svg
            width='112'
            height='112'
            viewBox='0 0 112 112'
            fill='none'
            xmlns='http://www.w3.org/2000/svg'
          >
            <rect width='112' height='112' rx='4' fill='black' />

            <path
              d='M74.045 38.3821C67.1047 38.3821 61.1816 43.1629 58.8993 49.8454H51.6483C49.3652 43.1638 43.4491 38.3821 36.5017 38.3821C29.5517 38.3821 23.6391 43.1629 21.357 49.8454H16.3978C16.0456 49.8454 15.7079 49.9971 15.4589 50.2672C15.2098 50.5373 15.0699 50.9036 15.0699 51.2854C15.0699 51.6673 15.2098 52.0336 15.4589 52.3037C15.7079 52.5737 16.0456 52.7254 16.3978 52.7254H20.6134C20.4363 53.7603 20.3301 54.8183 20.3301 55.9127C20.3301 65.5798 27.5802 73.4442 36.4955 73.4442C45.4109 73.4442 52.6619 65.5808 52.6619 55.9136C52.6619 54.8298 52.5557 53.7651 52.3786 52.7264H58.1504C57.9734 53.7613 57.8672 54.8192 57.8672 55.9136C57.8672 65.5808 65.1173 73.4451 74.0326 73.4451C82.947 73.4451 90.1992 65.5818 90.1992 55.9136C90.1992 54.8298 90.093 53.7651 89.9157 52.7264H94.131C94.4836 52.7264 94.8209 52.5747 95.0705 52.3046C95.3195 52.0346 95.4589 51.6683 95.4589 51.2864C95.4589 50.9045 95.3195 50.5382 95.0705 50.2682C94.8209 49.9981 94.4836 49.8464 94.131 49.8464H89.1721C86.8902 43.1648 80.973 38.383 74.0264 38.383L74.045 38.3821ZM36.5017 70.5613C29.0568 70.5613 22.9911 63.9834 22.9911 55.9098C22.9911 47.8361 29.0568 41.2582 36.5017 41.2582C43.9467 41.2582 50.0124 47.8361 50.0124 55.9098C50.0124 63.9834 43.9467 70.5613 36.5017 70.5613ZM74.045 70.5613C66.6001 70.5613 60.5344 63.9834 60.5344 55.9098C60.5344 47.8361 66.6001 41.2582 74.045 41.2582C81.4897 41.2582 87.5554 47.8361 87.5554 55.9098C87.5554 63.9834 81.4897 70.5613 74.045 70.5613Z'
              fill='white'
            />
            <path
              d='M76.7353 47.7421C76.213 47.1757 75.372 47.1757 74.8577 47.7421L66.3859 56.9293C65.8635 57.4957 65.8635 58.4077 66.3859 58.9655C66.6417 59.2438 66.9879 59.3898 67.3225 59.3898C67.6588 59.3898 68.0041 59.2467 68.2599 58.9655L76.7318 49.7783C77.254 49.2118 77.254 48.3008 76.7318 47.7421H76.7353ZM80.6153 50.4051L75.7022 55.7331C75.1799 56.2995 75.1799 57.2115 75.7022 57.7703C75.8248 57.9043 75.9707 58.0107 76.1315 58.0834C76.2922 58.156 76.4647 58.1934 76.6388 58.1934C76.813 58.1934 76.9854 58.156 77.1461 58.0834C77.3069 58.0107 77.4527 57.9043 77.5753 57.7703L82.4896 52.4423C83.0114 51.8758 83.0114 50.9638 82.4896 50.4051C82.3668 50.2705 82.2207 50.1635 82.0594 50.0905C81.8987 50.0175 81.7254 49.9799 81.5508 49.9799C81.3764 49.9799 81.2036 50.0175 81.0425 50.0905C80.8815 50.1635 80.7353 50.2705 80.6126 50.4051H80.6153ZM38.8113 47.7421C38.289 47.1757 37.4481 47.1757 36.9337 47.7421L28.4619 56.9293C27.9396 57.4957 27.9396 58.4077 28.4619 58.9655C28.7177 59.2438 29.0639 59.3898 29.3985 59.3898C29.7332 59.3898 30.0801 59.2467 30.336 58.9655L38.8078 49.7783C39.3301 49.2118 39.3301 48.3008 38.8078 47.7421H38.8113ZM42.6816 50.4051L37.7685 55.7331C37.2463 56.2995 37.2463 57.2115 37.7685 57.7703C37.8911 57.9043 38.0371 58.0107 38.1978 58.0834C38.3585 58.156 38.531 58.1934 38.7051 58.1934C38.8793 58.1934 39.0517 58.156 39.2124 58.0834C39.3732 58.0107 39.5191 57.9043 39.6417 57.7703L44.5557 52.4423C45.078 51.8758 45.078 50.9638 44.5557 50.4051C44.433 50.2705 44.2869 50.1635 44.1258 50.0905C43.9647 50.0175 43.7919 49.9799 43.6174 49.9799C43.4428 49.9799 43.2699 50.0175 43.1089 50.0905C42.9478 50.1635 42.8017 50.2705 42.679 50.4051H42.6816Z'
              fill='white'
            />
          </svg>
          <h1 tw='mb-0'>Welcome to my blog template.</h1>
          <h2 tw='mt-2'>Built using tailwind, shadcn, velite and Nextjs 14.</h2>
          <div tw='absolute left-12 bottom-12 right-12 flex items-center w-full justify-between'>
            <div tw='flex text-xl'>{siteConfig.links.personalSite}</div>
            <div tw='flex items-center text-xl'>
              <div tw='flex ml-2'>{siteConfig.links.github}</div>
            </div>
          </div>
        </div>
      ),
      {
        width: 1200,
        height: 672.1,
        fonts: [
          {
            name: 'Inter',
            data: fontBold,
            style: 'normal',
            weight: 700,
          },
        ],
      }
    );
  } catch (error) {
    return new Response('Failed to generate image', {
      status: 500,
    });
  }
}
